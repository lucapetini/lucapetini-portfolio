"use client";
import { jsx as _jsx } from "react/jsx-runtime";
import { useRef } from "react";
import styles from "./TiltFx.module.scss";
import { Flex } from ".";
const TiltFx = ({ children, intensity = 1, ...rest }) => {
    const ref = useRef(null);
    let lastCall = 0;
    let resetTimeout;
    const handleMouseMove = (e) => {
        if ("ontouchstart" in window)
            return;
        clearTimeout(resetTimeout);
        const now = Date.now();
        if (now - lastCall < 16)
            return;
        lastCall = now;
        const element = ref.current;
        if (!element)
            return;
        const rect = element.getBoundingClientRect();
        const offsetX = e.clientX - rect.left;
        const offsetY = e.clientY - rect.top;
        const centerX = rect.width / 2;
        const centerY = rect.height / 2;
        const deltaX = (offsetX - centerX) / centerX;
        const deltaY = (offsetY - centerY) / centerY;
        const rotateX = -deltaY * 2 * intensity;
        const rotateY = -deltaX * 2 * intensity;
        const translateZ = 30 * intensity;
        window.requestAnimationFrame(() => {
            element.style.transform = `perspective(1000px) translate3d(0, 0, ${translateZ}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        });
    };
    const handleMouseLeave = () => {
        if ("ontouchstart" in window)
            return;
        const element = ref.current;
        if (element) {
            resetTimeout = setTimeout(() => {
                element.style.transform =
                    "perspective(1000px) translate3d(0, 0, 0) rotateX(0deg) rotateY(0deg)";
            }, 100);
        }
    };
    return (_jsx(Flex, { ref: ref, overflow: "hidden", className: styles.tiltFx, onMouseMove: handleMouseMove, onMouseLeave: handleMouseLeave, ...rest, children: children }));
};
export { TiltFx };
TiltFx.displayName = "TiltFx";
//# sourceMappingURL=TiltFx.js.map